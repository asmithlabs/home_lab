@startuml NAS_Setup_Blueprint

skinparam rectangle {
  BackgroundColor #f9f9f9
  BorderColor Black
  RoundCorner 10
}

actor User

package "Home Network" {
    rectangle "Router" as Router

    rectangle "Raspberry Pi\n(Home Assistant)" as HA

    rectangle "NAS Server\n(ThinkCentre M920q)" as NAS {
        rectangle "TrueNAS SCALE" as OS
        rectangle "2TB SSD\n(OS Drive)" as SSD
        rectangle "8TB USB HDD\n(EXT4)" as HDD
        rectangle "WireGuard VPN Server" as VPN
        rectangle "SMB/NFS Shares" as Shares
        rectangle "SSH (YubiKey Auth)" as SSH
        rectangle "Backup Script\n(Rsync, Snapshots)" as Backup
    }
}

User --> Router : Local or Remote Access
Router --> NAS : Static IP, Port Forwarding (VPN only)
NAS --> HDD : Data Storage
NAS --> SSD : OS + Cache
NAS --> Shares : File Services
NAS --> VPN : Encrypted Remote Tunnel
User --> VPN : Connect via WireGuard
User --> SSH : Admin Access (YubiKey)

NAS --> HA : Status Reports, Integration
HA --> Router : Local Network Only

@enduml
